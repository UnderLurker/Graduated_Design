window.onload=function(){"use strict";var screenWidth=$(window).width(),screenHeight=$(window).height(),Cropper=window.Cropper,console=window.console||{log:function(){}},container,image=document.querySelector(".img-container").getElementsByTagName("img").item(0),actions=document.getElementById("actions"),isUndefined=function(obj){return void 0===obj},options,cropper=new Cropper(image,{minContainerHeight:screenHeight,minContainerWidth:screenWidth,aspectRatio:1,viewMode:1,guides:!1,dragMode:"move",build:function(e){},built:function(e){$("#containerDiv").show(),$("#imgEdit").show()},zoom:function(e){console.log(e.type,e.detail.ratio)},background:!0,movable:!0,cropBoxMovable:!1,cropBoxResizable:!1});function preventDefault(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}$('[data-toggle="tooltip"]').tooltip(),void 0===document.createElement("cropper").style.transition&&($('button[data-method="rotate"]').prop("disabled",!0),$('button[data-method="scale"]').prop("disabled",!0)),actions.querySelector(".docs-buttons").onclick=function(event){var e=event||window.event,target=e.target||e.srcElement,result,input,data;if(cropper){for(;target!==this&&!target.getAttribute("data-method");)target=target.parentNode;if(!(target===this||target.disabled||target.className.indexOf("disabled")>-1)&&(data={method:target.getAttribute("data-method"),target:target.getAttribute("data-target"),option:target.getAttribute("data-option"),secondOption:target.getAttribute("data-second-option")}).method){if(void 0!==data.target&&(input=document.querySelector(data.target),!target.hasAttribute("data-option")&&data.target&&input))try{data.option=JSON.parse(input.value)}catch(e){console.log(e.message)}switch("getCroppedCanvas"===data.method&&(data.option=JSON.parse(data.option)),result=cropper[data.method](data.option,data.secondOption),data.method){case"scaleX":case"scaleY":target.setAttribute("data-option",-data.option);break;case"getCroppedCanvas":result&&(fileImg=result.toDataURL("image/jpg"),$("#showImg").attr("src",fileImg).show(),$("#photoBtn").val("重新选择"));break;case"destroy":$("#inputImage").val(""),$("#containerDiv").hide(),$("#imgEdit").hide()}if("object"==typeof result&&result!==cropper&&input)try{input.value=JSON.stringify(result)}catch(e){console.log(e.message)}}}};var inputImage=document.getElementById("inputImage"),URL=window.URL||window.webkitURL,blobURL;URL?inputImage.onchange=function(){var files=this.files,file;cropper&&files&&files.length&&(file=files[0],/^image\/\w+/.test(file.type)?(blobURL=URL.createObjectURL(file),cropper.reset().replace(blobURL)):window.alert("Please choose an image file.")),$(inputImage).find("img").hide()}:(inputImage.disabled=!0,inputImage.parentNode.className+=" disabled")};