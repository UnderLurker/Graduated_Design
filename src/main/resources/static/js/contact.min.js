function Contact(contactId,headPortrait,nickname,doNotDisturb,phone,index,chatInfo,misTiming,relative){if(this.contactid=contactId,this.headportrait=headPortrait,this.nickname=nickname,this.doNotDisturb=doNotDisturb,this.phone=phone,0===index&&(this.select=!1),this.chatInfo=[],null!=chatInfo)for(let item of chatInfo)item.time=formatDate(item.time,!0),item.file&&(item.suffix=item.content.split(".").slice(-1)[0]),this.chatInfo.push(item);this.misTiming=misTiming,this.relative=relative}function Coordinate(row,col){this.row=row,this.col=col}function Index(contactId,row,col){this.contactId=contactId,this.coordinate=new Array,this.coordinate.push(new Coordinate(row,col)),this.addCoordinate=function(row,col){this.coordinate.push(new Coordinate(row,col))}}function vueAddContact(contact){let img=null;img=null!==contact.headportrait?"/headportrait/"+contact.headportrait:"./image/1.jpeg",vue.contact[0].push(new Contact(contact.contactid,img,contact.nickname,!1,contact.phone,0,null,contact.misTiming,0)),table.push(new Index(contact.contactid,0,vue.contact[0].length-1))}function vueDeleteContact(response){for(let i=0;i<vue.contact.length-1;i++)for(let j=0;j<vue.contact[i].length;j++){let person=vue.contact[i][j];person.contactid===response.id&&vue.contact[i].splice(vue.contact[i].indexOf(person),1)}for(let person of table)person.contactId===response.id&&table.splice(table.indexOf(person),1);emojiShow&&document.getElementById("emotion").click(),$(".left-nav-expand").click(),vue.currentChat.contactInfo={},$(".ordinary:eq(0)").css({width:"0",opacity:"0"}),$(".right-info:eq(0)").css({width:"0",opacity:"0"}),$(".reminder:eq(0)").css("display","block"),$(".top:eq(0)").css("height","0"),$(".input-frame:eq(0)").css("height","0"),Vue.set(vue.messagebox,"option",1),Vue.set(vue.messagebox,"title","删除联系人"),Vue.set(vue.messagebox,"msg",!0===response.deleteContact?"已被 "+response.nickname+" 删除":"已成功删除 "+response.nickname),$(".create-chat-folder").css("display","block"),$(".cancel").css("display","none")}$("#editContactNickName").click((function(){$("#resetName").val(vue.currentChat.contactInfo.nickname),$("#reset-contact-name").css("display","block"),$("#resetName").keydown((function(e){13===e.keyCode&&$("#submitResetName").click()}))})),$("#cancelResetName").click((function(){vue.cancelOption()})),$("#submitResetName").click((function(){let resetName=$("#resetName").val().trim();""!==resetName&&sendPost("/account/resetName/"+getCookie("id"),{name:resetName,contactId:vue.currentChat.contactInfo.contactid},sendByJson,msg=>{let response;if(200===msg.data.status){vue.cancelOption(),Vue.set(vue.messagebox,"option",-1),Vue.set(vue.messagebox,"title","更改联系人昵称"),Vue.set(vue.messagebox,"msg","成功修改联系人昵称"),$(".create-chat-folder").css("display","block"),$(".cancel").css("display","none"),Vue.set(vue.currentChat.contactInfo,"nickname",resetName);for(let col of vue.contact)for(let person of col)person.contactid===vue.currentChat.contactInfo.contactid&&(person.nickname=resetName)}})})),changeRelative=function(relative){for(let item of table)if(item.contactId===vue.currentChat.contactInfo.contactid){for(let obj of item.coordinate){let row=obj.row,col=obj.col;vue.contact[row][col].relative=relative}break}},blackContact=function(nickname){Vue.set(vue.messagebox,"option",-1),Vue.set(vue.messagebox,"title","拉黑联系人"),Vue.set(vue.messagebox,"msg","被 "+nickname+" 拉黑!!!"),$(".create-chat-folder").css("display","block"),$(".cancel").css("display","none")},reductionSelectedPerson=function(){for(let i=tempSelectedPerson.length-1;i>=0;i--)vue.selected.selectedPerson.splice(tempSelectedPerson[i].local,0,tempSelectedPerson[i].person);tempSelectedPerson=[]};